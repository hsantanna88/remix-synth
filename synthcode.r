``` r
#%#%#%#%#%#%#%#%#
#September 25, 2019
# Made By Hugo and Terry
# R Code for Synth Control Chapter of Cunningham's Mixtape
#%#%#%#%#%#%#%#%#

#Libraries needed
library(readstata13)
library(Synth)

#> ##
#> ## Synth Package: Implements Synthetic Control Methods.
#> ## See http://www.mit.edu/~jhainm/software.htm for additional information.
library(gsynth)
#> Registered S3 method overwritten by 'GGally':
#>   method from   
#>   +.gg   ggplot2
library(MSCMT)

  #For the placebo inference using the classical synth package, we use sctools, which needs
#devtools for installation:
#%# library(devtools)
#%# install_github("bcastanho\SCtools")

library(SCtools)
#> Loading required package: ggplot2
#> Loading required package: stringr
#> Loading required package: cvTools
#> Loading required package: lattice
#> Loading required package: robustbase
        

#Uploading the file
texas <- read.dta13("texas.dta")

####Using the Synth Package####
dataprep.out = dataprep(
  foo = texas,
  predictors = c("poverty", "income", "ur"),
  predictors.op = "mean",
  time.predictors.prior = 1985:1993,
  special.predictors = list(
    list("bmprison", 1988, "mean"),
    list("alcohol", 1990, "mean"),
    list("aidscapita",  1990:1991, "mean"),
    list("black", 1990:1992, "mean"),
    list("perc1519", 1990, "mean")),
  dependent = "bmprison",
  unit.variable = "statefip",
  unit.names.variable = "state",
  time.variable = "year",
  treatment.identifier = 48,
  controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56), 
  time.optimize.ssr = 1985:1993,
  time.plot = 1985:2000
)

synth.out = synth(data.prep.obj = dataprep.out, method = "BFGS")
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 8481148 
#> 
#> solution.v:
#>  0.0003475171 0.08947856 0.0004895795 0.9095168 9.88181e-05 8.1496e-06 5.65358e-05 4.0492e-06 
#> 
#> solution.w:
#>  0.0003116684 3.8946e-05 0.0001009366 0.0001672819 0.3784371 6.78354e-05 4.74124e-05 6.73013e-05 5.48293e-05 0.0007446291 0.0005215564 5.60537e-05 0.0001087549 0.0001523563 0.0001307036 9.55307e-05 0.0001005057 0.0001235599 0.6138676 8.85689e-05 0.0001166445 5.38668e-05 0.0002885432 6.61845e-05 6.765e-07 0.0001444892 0.0001015557 9.93151e-05 6.21608e-05 5.80663e-05 8.68762e-05 8.92486e-05 0.0002102418 0.0004894286 0.0001243572 0.0003206994 0.0001372694 7.84855e-05 0.0001932716 6.70021e-05 0.0009495415 0.0001257907 0.0001174345 0.0001823842 8.8886e-05 0.0001465323 6.5343e-05 7.30014e-05 0.0001043318 7.52903e-05


placebos = generate.placebos(dataprep.out, synth.out)
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 113159.5 
#> 
#> solution.v:
#>  8.62946e-05 0.0002578041 0.01476043 0.8814468 0.02497243 0.06937079 0.002332208 0.006773212 
#> 
#> solution.w:
#>  6.42e-08 1.008e-07 0.1251577 1.175e-06 1.609e-07 1.962e-07 1.114e-07 1.235e-07 2.315e-07 6.325e-07 1.146e-07 8.56e-08 1.966e-07 1.791e-07 1.556e-07 1.1257e-06 7.335e-07 1.814e-07 1.152e-07 4.009e-07 1.376e-07 1e-09 1.13e-07 0.3340703 2.133e-07 8.33e-08 1.197e-07 5.77e-08 5.62e-08 2.694e-07 8.23e-08 0.003367772 0.1543915 8.6e-08 0.307941 2.8382e-06 1.277e-07 8.627e-07 1.224e-07 1.576e-07 9.85e-08 6.447e-07 0.07505869 8.21e-08 5.62e-07 1.41e-07 2.2e-09 8.03e-08 7.32e-08 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 460.3356 
#> 
#> solution.v:
#>  0.002411722 0.0003834126 5.45762e-05 0.9245148 0.001028408 0.0005299502 0.05127101 0.0198061 
#> 
#> solution.w:
#>  0.000116572 0.0001012132 0.0001432001 3.23623e-05 0.0002533978 0.0007428433 0.001339801 0.01276917 4.76026e-05 7.02979e-05 0.4097158 1.60475e-05 9.11463e-05 0.0001114528 8.13104e-05 0.0001188695 0.0001401782 9.30635e-05 1.19907e-05 0.0001173675 0.0005979402 6.58224e-05 0.0003231583 0.000325019 0.0001125654 2.651e-07 5.60944e-05 0.03309144 0.3842953 0.0001119432 3.03e-08 4.12527e-05 7.71371e-05 6.6948e-06 6.8837e-05 0.0001220519 0.0001134258 8.10084e-05 0.0001828751 8.48221e-05 1.9843e-06 0.000209014 7.4107e-06 1.67442e-05 0.0001074085 0.0003368355 0.1532792 0.0001188147 5.12743e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 3917.16 
#> 
#> solution.v:
#>  0.003738108 0.003244194 8.85989e-05 0.91966 0.02455291 0.0003895638 0.0006978362 0.04762878 
#> 
#> solution.w:
#>  0.003413201 0.006543053 0.006962201 1.9733e-06 0.01250826 0.007017189 0.008825065 0.01046066 0.04296953 0.002721389 0.008847713 0.01386136 0.003332675 0.006351491 0.01187556 0.0097029 0.008188789 0.0009083122 0.01347464 0.004798787 0.008838344 0.001260194 0.01125078 0.003138534 0.006037845 0.4427645 0.0117081 0.0954122 0.01738493 0.005959719 0.03025678 0.004306244 0.002798766 0.0002392535 0.002177293 0.007860423 0.02019168 0.004031489 0.01242707 0.0004565323 0.01431846 0.007127467 0.04906098 0.01506772 0.004502728 0.01235639 0.01139064 0.005822798 0.009087423 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 57417.51 
#> 
#> solution.v:
#>  0.1430537 0.15505 0.1194421 0.1814774 0.1101925 0.1735379 0.09165694 0.02558945 
#> 
#> solution.w:
#>  8.3929e-06 9.48e-07 4.0737e-06 5.49e-07 3.3424e-06 8.861e-07 1.7883e-06 9.411e-07 2.0966e-06 1.6505e-06 2.6482e-06 2.6438e-06 1.1298e-06 1.9013e-06 5.2246e-06 3.9996e-06 0.3866139 5.6e-09 6.5841e-06 1.6373e-06 1.2774e-06 9.329e-07 3.5298e-06 0.3100414 4.3621e-06 1.69248e-05 3.3474e-06 1.3478e-06 9.154e-07 9.427e-07 2.29926e-05 6.714e-07 2.1344e-06 7.9711e-06 1.3026e-06 0.2167943 6.3213e-06 1.8625e-06 2.0789e-06 2.6448e-06 0.08626279 0.0001011506 7.7e-08 2.2525e-06 1.6275e-06 3.1873e-06 4.35004e-05 2.1393e-06 1.701e-06 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 19080342 
#> 
#> solution.v:
#>  0.001088093 0.0008184944 0.0002635977 0.9922864 0.0005869452 0.001009894 0.002402877 0.001543734 
#> 
#> solution.w:
#>  1.7e-09 1e-10 3e-10 4e-10 2e-10 6e-10 3e-10 2e-09 1.14e-08 3.8e-09 1e-10 0 4.2e-09 6e-10 1e-10 3e-10 3e-10 3.7e-09 0 3e-09 4e-10 7.1e-09 1e-10 1e-09 1.1e-09 0 1e-10 2e-10 0 2.6e-09 1e-10 0.9999999 2.6e-09 0 4.4e-09 5e-10 1e-10 2.9e-09 1e-10 2.1e-09 0 5e-10 1e-10 0 2.1e-09 2e-10 1e-10 4e-10 0 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 34259.31 
#> 
#> solution.v:
#>  0.00146544 0.01585277 0.002629715 0.9071979 0.0001508666 0.0001666366 0.002132389 0.07040425 
#> 
#> solution.w:
#>  0.001798834 5.90427e-05 0.003756965 0.002373628 0.001085825 0.1159146 0.001652981 0.001702251 0.002225954 0.001700658 0.2592573 0.002180515 0.001913165 0.002458276 0.003823002 0.002195797 0.003286267 0.001615351 0.006181924 0.002076139 5.44421e-05 0.001468152 0.002840191 0.001221419 0.002791312 0.001582137 0.002255247 5.515e-07 0.01298143 0.001513234 0.003028551 0.001289908 0.001881702 0.003133308 0.001567447 0.003176316 0.2513779 0.001598261 0.002651868 0.001608405 0.002908659 0.002411671 0.002304652 0.002925006 0.001984063 0.1391886 0.1272685 0.0028343 0.002894291 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 58478.86 
#> 
#> solution.v:
#>  0.0808611 0.1287782 0.3804989 0.0006774054 0.04399566 0.2582332 0.0798328 0.02712275 
#> 
#> solution.w:
#>  2.8e-09 0 2.8e-09 2.4e-09 3.2e-09 4.3e-09 2e-10 0 2.9e-09 3.9e-09 0.3039238 2.5e-09 4.9e-09 4.4e-09 4.7e-09 7.8e-09 2.4e-09 1.7e-09 3.7e-09 7.94488e-05 0.4253802 3.4e-09 6.2e-09 1.5e-09 4.1e-09 2.5e-09 4.4e-09 3e-09 3e-10 0.2706163 1.8e-09 2.5e-09 6e-09 3.5e-09 4.8e-09 3e-09 3.3e-09 6.2e-09 5.8e-09 3.4e-09 3.4e-09 3.4e-09 3.4e-09 4.3e-09 4.21e-08 4.2e-09 1.4e-09 5e-09 3.3e-09 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 2858.746 
#> 
#> solution.v:
#>  0.0003091788 0.0008354597 0.0004518676 0.9896587 0.0006059735 0.002416743 0.003979817 0.001742225 
#> 
#> solution.w:
#>  1.70975e-05 1.36642e-05 5.1545e-06 6.8156e-06 2.7981e-06 5.4662e-06 0.06634638 0.05235147 4.9534e-06 1.16885e-05 0.6047009 5.589e-07 8.7968e-06 8.4059e-06 4.2785e-06 1.20891e-05 4.4752e-06 1.06387e-05 3.226e-07 0.001181006 9.4568e-06 6.708e-06 6.1609e-06 0.1133253 1.0516e-05 3.382e-07 4.6887e-06 1.46199e-05 0.09953038 9.0276e-06 1.475e-06 3.2255e-06 2.19126e-05 2.985e-07 7.5462e-06 6.5017e-06 3.8096e-06 8.799e-06 5.2006e-06 0.06223107 4.891e-07 1.21733e-05 4e-10 1.4e-09 5.76618e-05 6.6351e-06 1.3569e-06 1.70819e-05 6.509e-07 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 329446.8 
#> 
#> solution.v:
#>  0.04747248 0.2262115 0.07018102 0.2037013 0.1866023 0.0008030591 0.07985271 0.1851757 
#> 
#> solution.w:
#>  2.0984e-06 4.1031e-05 1.1035e-06 1.1564e-06 3.94e-08 1.1377e-06 1.0859e-06 2.4319e-06 3.0743e-06 3.9133e-06 1.2806e-06 6.729e-07 1.00043e-05 9.556e-07 7.385e-07 7.939e-07 8.956e-07 0.03769845 7.8e-07 0.4496751 1.8256e-06 3.5371e-06 1.0698e-06 1.5309e-06 1.3065e-06 8.668e-07 7.859e-07 0.4305064 9.538e-07 2.8165e-06 1.1407e-06 0.08201065 1.6114e-06 7.374e-07 1.4629e-06 9.24e-07 9.328e-07 1.3349e-06 1.0641e-06 3.5014e-06 7.098e-07 1.331e-06 3.45e-08 8.35e-07 1.8899e-06 1.1284e-06 8.162e-07 1.1648e-06 9.233e-07 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 4678656 
#> 
#> solution.v:
#>  0.04540253 4.3009e-06 0.0007833055 0.9176758 0.02550024 0.0002271901 0.004710121 0.005696518 
#> 
#> solution.w:
#>  9.283e-07 4.432e-07 7.443e-07 1.0389e-06 0.1466711 7.574e-07 4.435e-07 2.587e-07 0.02941351 7.769e-07 6.776e-07 2.551e-07 1.5671e-06 3.646e-07 4.279e-07 5.392e-07 6.98e-07 2.3948e-06 4.853e-07 4.732e-07 5.314e-07 1.1467e-06 8.876e-07 6.535e-07 1.2517e-06 9.252e-07 3.762e-07 0.2155339 1e-10 7.593e-07 1.1529e-06 0.60835 6.648e-07 3.968e-07 1.0221e-06 8.924e-07 1.0912e-06 1.2288e-06 3.015e-07 5.658e-07 5.758e-07 8.681e-07 1.376e-07 2.22e-07 4.895e-07 8.708e-07 6.484e-07 3.217e-07 2.157e-07 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 61334.56 
#> 
#> solution.v:
#>  1.0071e-06 0.05547072 0.04869277 0.865233 0.00495781 0.003932505 0.01587005 0.005842174 
#> 
#> solution.w:
#>  2.87231e-05 1.6376e-06 1.4888e-06 3.949e-06 4.7308e-06 1.8363e-06 2.5079e-06 1.8255e-06 7.276e-07 2.2463e-06 1.2099e-06 1.7407e-06 6.479e-06 2.948e-06 1.7755e-06 2.3102e-06 2.9039e-06 2.17583e-05 1.4593e-06 8.2233e-06 1.9536e-06 1.02767e-05 1.5432e-06 3.2059e-05 2.857e-06 1.3024e-06 1.2281e-06 8.855e-07 8.588e-07 3.6751e-06 1.5392e-06 0.2313139 0.1696166 1.1444e-06 7.8322e-06 3.1084e-06 1.5282e-06 4.3554e-06 1.6649e-06 0.5988667 1.0707e-06 4.2256e-06 3.1894e-06 1.1917e-06 7.7633e-06 1.7718e-06 2.3153e-06 1.3884e-06 1.6674e-06 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 134947.6 
#> 
#> solution.v:
#>  0.1860388 3.68e-08 0.3482113 0.2258021 0.2143258 7.1936e-06 6.55762e-05 0.02554929 
#> 
#> solution.w:
#>  5.04e-08 8.15e-08 1.228e-07 6.01e-08 1.28e-07 2.78e-07 7.16207e-05 8.5585e-06 9.72e-08 4.622e-07 8.48e-08 4.05e-08 1.02e-07 8.62e-08 2.324e-07 8.87e-07 5.76e-08 2.85e-08 1.909e-07 2.3265e-06 4.972e-07 5.7e-08 6.606e-07 1.77e-08 1.789e-07 9.92e-08 0.7171135 1.2e-09 0.2827958 7.932e-07 4.89e-08 2.194e-07 1.39e-07 1.368e-07 1.185e-07 9.5e-08 2.438e-07 2.55e-07 2.673e-07 4.96e-08 1.16e-07 8.58e-08 1.68e-08 1.144e-07 4.465e-07 2.641e-07 2.22e-08 1.655e-07 5.53e-08 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 893.3592 
#> 
#> solution.v:
#>  0.001183733 2.1122e-06 0.0001246112 0.9915968 0.003596548 0.001049296 0.002446011 8.45e-07 
#> 
#> solution.w:
#>  7.0735e-06 1.79185e-05 1.58787e-05 1.34576e-05 1.1042e-06 1.73564e-05 1.12963e-05 1.31051e-05 4.8824e-06 2.7347e-06 4.6298e-06 6.9145e-06 4.5214e-06 1.22953e-05 2.48103e-05 1.65437e-05 1.63364e-05 4.7308e-06 0.5740086 5.2121e-06 1.41762e-05 3.522e-06 2.06954e-05 8.8639e-06 8.9836e-06 0.1402919 2.11134e-05 1.34779e-05 3.4477e-06 5.588e-06 2.01791e-05 1.8704e-06 5.7715e-06 0.003648783 4.525e-06 1.32435e-05 2.07164e-05 5.6335e-06 1.85704e-05 6.2497e-06 0.1100638 1.25439e-05 8.91532e-05 2.14245e-05 6.3671e-06 1.81415e-05 0.1713723 1.45232e-05 5.50893e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 2971096 
#> 
#> solution.v:
#>  0.01769479 2.2008e-06 0.01872716 0.843867 0.02548827 0.05213477 0.0296962 0.01238956 
#> 
#> solution.w:
#>  0.002507699 0.01986329 0.001248614 0.004648683 0.01629586 0.001280215 0.002176496 0.001334542 0.004397753 0.08764152 0.001221506 0.00139059 0.0006571233 0.001053006 0.001382567 0.001913237 0.001193904 0.1133452 0.001306777 0.1095905 0.001208703 0.3688529 0.006545575 0.0002641208 0.003045776 0.003772149 0.00121926 0.06337207 0.001487813 0.0002160339 0.001223665 6.24494e-05 2.146e-06 0.001397975 0.1454041 0.001605518 0.001941662 0.007153501 0.0009905582 0.001431245 0.002309275 0.00278367 0.0003620237 0.0009507997 0.002653836 0.001995427 0.0006431384 0.001798419 0.0008571586 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 97417.38 
#> 
#> solution.v:
#>  0.04534384 0.005565133 0.001045884 0.8969339 0.00287568 0.003903223 0.00169382 0.04263849 
#> 
#> solution.w:
#>  0.02835084 0.02377678 0.006529978 0.01708118 1.29314e-05 0.00696056 0.01390721 0.008885342 0.001462201 0.001208558 0.003225673 0.007650225 0.01496296 0.005607239 0.0357465 0.03639755 0.01699574 0.004817101 0.01343481 0.004357519 0.007521044 5.1544e-06 0.01647053 0.01495541 0.008020944 0.0112886 0.04271994 0.004954171 0.0101477 0.002790541 0.008035344 0.0006849306 0.02007232 0.02043293 0.1127602 0.01315514 0.007335313 0.004789362 0.008265207 0.007013734 0.02259449 0.02139534 0.239673 0.01353073 0.07054307 0.007942097 0.0132133 0.01234581 0.02597276 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 1855.775 
#> 
#> solution.v:
#>  0.04456897 0.1201631 0.2081616 0.1064289 0.0001732583 0.01901042 0.01814513 0.4833486 
#> 
#> solution.w:
#>  0.001622604 0.02708849 0.005805063 0.003112093 0.001077397 0.007876066 0.005974857 0.004048261 0.0004629259 0.002958394 0.001292496 0.00680357 0.004591879 0.00193659 0.003824217 0.01603454 0.003749621 0.001191392 0.07228849 0.002820599 0.00535779 0.001594785 0.0134574 0.0007643467 0.004122628 0.01489463 1.58345e-05 0.006838025 0.06925038 0.002444591 0.003816322 0.0009926195 0.002042534 0.4545902 0.002863736 0.0042452 0.03802934 0.004458886 0.01157388 0.001322481 0.009093607 0.003026894 0.01054452 0.1178623 0.002894564 0.02329079 0.003638314 0.011183 0.001230858 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 61114.64 
#> 
#> solution.v:
#>  0.001917695 0.3619142 0.4717503 0.01003646 0.05355421 0.02044268 0.009122705 0.07126176 
#> 
#> solution.w:
#>  2.979e-07 2.8e-09 5.37e-08 3.193e-07 1.087e-07 3.64e-08 0.04256432 5.31e-08 6.8e-09 2.22e-08 2.624e-07 0 8.6e-08 6.58e-08 2.667e-07 0.6223323 2.514e-07 4.11e-08 7.22e-08 0.08625065 6.74e-08 5.54e-08 4.1e-08 4.97e-08 1.699e-07 4.51e-08 0.2486529 1.43e-08 1.57e-08 2.032e-07 4.57e-08 4.7293e-06 2.6391e-06 6.47e-08 4.456e-07 4.53734e-05 8e-10 4.1451e-06 7.24e-08 9.95e-08 4.62e-08 5.932e-07 6.406e-07 5.3e-08 0.000138131 8.5e-09 3.36e-08 4.42e-08 5.12e-08 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 4197.003 
#> 
#> solution.v:
#>  0.0221142 0.04658536 0.2146526 0.2855105 0.1660917 0.02195298 0.157639 0.08545364 
#> 
#> solution.w:
#>  0.000184046 4.19653e-05 4.78632e-05 0.2396686 0.01804957 5.88561e-05 8.2689e-05 3.26362e-05 1.33412e-05 1.40784e-05 5.25593e-05 5.87688e-05 0.000241765 0.0001072447 8.9306e-05 3.93115e-05 2.068e-07 8.59957e-05 5.46665e-05 3.2717e-05 8.91128e-05 7.70009e-05 0.0001197348 4.652e-07 6.10401e-05 4.30278e-05 6.76873e-05 1.7329e-05 1.99217e-05 5.33872e-05 0.001846643 0.0009112888 2.96571e-05 3.49543e-05 5.6233e-05 0.2723739 2.8205e-05 3.36321e-05 4.31101e-05 3.14331e-05 0.1040259 0.0002926637 0.08879589 3.99188e-05 4.28273e-05 3.808e-05 0.2717741 2.96537e-05 6.68808e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 540887.8 
#> 
#> solution.v:
#>  8.79337e-05 0.1276185 0.001493107 0.6705459 0.05349929 0.0001811874 0.0001339255 0.1464401 
#> 
#> solution.w:
#>  3.3117e-05 2.54516e-05 8.09058e-05 3.0694e-05 0.1694777 2.99656e-05 1.11402e-05 3.28735e-05 4.2237e-05 0.1993505 6.26139e-05 2.66884e-05 5.42119e-05 5.12937e-05 3.42123e-05 3.06066e-05 2.24778e-05 3.28137e-05 4.11616e-05 2.84101e-05 1.94823e-05 7.08188e-05 3.13028e-05 0.6275692 4.34471e-05 0.0001036691 3.24207e-05 0.0004983737 0.0001064313 2.26065e-05 0.0001421897 2.11232e-05 3.72692e-05 7.17747e-05 3.46399e-05 2.87465e-05 4.44568e-05 3.27416e-05 3.11738e-05 0.001178197 4.92665e-05 3.33626e-05 5.9503e-06 5.92028e-05 2.816e-05 3.26116e-05 3.30044e-05 9.13621e-05 4.78951e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 33.53882 
#> 
#> solution.v:
#>  8.51e-08 0.0002423336 0.02137723 0.9506991 4.7115e-05 0.002031709 0.02547779 0.0001246818 
#> 
#> solution.w:
#>  4.03532e-05 2.148e-07 0.0001340287 6.88006e-05 9.2093e-06 0.0002071676 9.4845e-05 7.01519e-05 3.33244e-05 2.09586e-05 3.00115e-05 0.02315185 7.0839e-06 3.13143e-05 7.96474e-05 0.0002218784 0.0001217919 0.0001004443 2.87374e-05 3.53092e-05 0.0001411391 2.44742e-05 0.0002331258 3.84043e-05 6.16774e-05 0.3931331 0.0001054862 0.0001126417 3.40259e-05 4.39117e-05 0.0001163761 1.52086e-05 3.6034e-05 9.39369e-05 3.15728e-05 8.75544e-05 0.0003938512 4.06237e-05 0.0002777854 3.56447e-05 0.007243983 6.90154e-05 0.0002536668 0.572483 4.16136e-05 0.0002213004 7.4e-08 9.5616e-05 4.80012e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 399049.4 
#> 
#> solution.v:
#>  0.0007088916 0.0007210129 0.004312648 0.9682079 0.0105513 0.0001714442 0.01175139 0.003575393 
#> 
#> solution.w:
#>  9.2612e-06 5.9584e-06 6.2903e-06 6.5458e-06 0.0001015502 7.9193e-06 0.1833464 2.28585e-05 0.1491294 0.06131372 1.83248e-05 1.25319e-05 3.9516e-06 1.36993e-05 6.1402e-06 5.8877e-06 7.6872e-06 5.1167e-06 1.01167e-05 5.5846e-06 9.8101e-06 1.06224e-05 7.7206e-06 6.41e-06 1.00824e-05 5.1223e-06 6.0479e-06 8.3009e-06 6.5026e-06 0.0002065288 4.477e-06 0.1571948 2.05478e-05 5.3029e-06 1.05887e-05 6.2978e-06 7.1267e-06 1.48136e-05 7.0775e-06 1.27274e-05 5.1129e-06 7.828e-06 3.222e-06 5.3403e-06 0.4483547 8.1847e-06 3.9188e-06 7.4244e-06 4.4905e-06 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 51755.76 
#> 
#> solution.v:
#>  0.1231629 0.04008536 0.0005347543 0.08705204 0.1925922 0.003332185 0.4023831 0.1508574 
#> 
#> solution.w:
#>  7.97312e-05 0.1878592 0.0003301624 0.0001167536 0.01526814 0.0004155895 0.3976662 9.89829e-05 4.37676e-05 0.0001905152 8.48304e-05 0.0002113475 0.001555098 0.0001713308 0.0002177578 0.0002916996 0.0001986783 0.0002226057 5.17848e-05 0.0005355276 0.0001008427 0.0001586164 0.3342918 1.90384e-05 0.000191075 0.0003267645 0.0002470537 1.021e-07 0.01059191 0.0003198065 0.0003468842 0.0005173446 0.0001019571 0.0002700984 0.0002089623 0.0002159964 2.611e-07 0.0002523633 0.0003977684 5.56951e-05 0.0004332977 0.0001320209 0.04257819 0.0008562956 0.0001269275 4.03636e-05 0.000369458 0.0001782818 0.001061087 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 206319.7 
#> 
#> solution.v:
#>  0.1556049 0.1039002 0.001927811 0.3104142 0.1082449 0.05515309 0.1407346 0.1240202 
#> 
#> solution.w:
#>  0.0003254341 0.02882083 9.50493e-05 8.63833e-05 0.3203751 8.31502e-05 0.0001993341 0.0001782999 1.71011e-05 6.30228e-05 0.0002085549 8.52629e-05 0.0002018593 1.08538e-05 0.0002214396 0.0001015984 8.59806e-05 0.0001010026 0.0005355966 9.40628e-05 0.0001473592 0.0001276892 0.0001106638 0.02662563 0.0001172431 9.46506e-05 0.0001056121 0.0001396385 4.058e-07 0.0001092143 7.74974e-05 2.87962e-05 5.342e-07 0.0001158448 0.3944868 8.99978e-05 7.98808e-05 0.0001560625 0.0001116131 0.1572375 9.05257e-05 0.0001085058 0.06651914 0.0001783241 0.0002292176 9.42255e-05 8.67608e-05 0.0002629496 0.0005777576 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 11474.82 
#> 
#> solution.v:
#>  0.1074076 0.01521293 0.1576853 0.1563802 0.14332 0.1491889 0.1472356 0.1235695 
#> 
#> solution.w:
#>  5.10592e-05 0.06452631 0.0001450728 9.01145e-05 9.45179e-05 0.0002040009 0.1452184 2.18777e-05 1.30615e-05 0.0002978749 4.01197e-05 0.1476743 1.96493e-05 0.0001030104 3.84366e-05 4.92664e-05 1.4754e-06 6.66433e-05 3.65126e-05 1.6654e-06 0.0001071476 0.0001803262 5.60935e-05 1.58297e-05 0.0001753022 0.001966608 5.15493e-05 0.001710038 0.0066158 8.50733e-05 0.0001409183 6.39657e-05 6.09215e-05 7.7683e-06 8.88019e-05 0.0001114232 0.2439666 0.0001841355 5.17658e-05 3.34834e-05 0.3851416 0.0001027539 6.4042e-06 2.60013e-05 7.51782e-05 0.0001329933 3.97666e-05 8.93108e-05 1.90438e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 32910.22 
#> 
#> solution.v:
#>  0.0001290063 5.244e-07 0.0002254404 0.8949073 0.002065559 0.0001287649 0.02374207 0.07880137 
#> 
#> solution.w:
#>  5.4195e-06 5.065e-07 5.227e-07 8.864e-07 8.489e-07 5.111e-07 5.127e-07 6.529e-07 0.1150181 3.809e-07 1.2354e-06 5.008e-07 1.2e-09 6.611e-07 6.569e-07 4.842e-07 5.362e-07 5.772e-07 0.3418852 4.63e-07 6.552e-07 5.14e-07 3.336e-07 4.863e-07 6.379e-07 4.63e-07 4.99e-07 4.817e-07 4.602e-07 5.562e-07 4.573e-07 2.5e-09 1.1901e-06 4.514e-07 6.164e-07 6.347e-07 4.805e-07 5.622e-07 5.018e-07 8.7327e-06 4.523e-07 8.263e-07 0.5430585 4.397e-07 7.763e-07 4.927e-07 2.625e-07 5.365e-07 3.394e-07 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 100180.1 
#> 
#> solution.v:
#>  0.1166093 0.07601474 0.1584223 0.0008244961 0.2513983 0.2153796 0.003035203 0.178316 
#> 
#> solution.w:
#>  0.003992817 0.004493265 0.006573532 0.2203229 0.005960425 0.007053202 0.007768565 0.006186261 0.001285192 0.0841503 0.00347864 0.01129818 0.00204905 0.00745018 0.003213759 0.01028632 0.1092597 0.003216471 0.005995407 0.009464455 0.04802953 0.005452204 0.006055129 0.09248977 0.001071526 0.03187326 0.01297965 0.01076062 0.004934604 0.004768978 0.006124602 0.003330867 0.01191532 0.01276505 0.01247915 0.01755982 0.01211226 0.08751268 0.004846081 0.003828507 0.04493612 0.01493056 0.0004000496 0.004670503 0.01048245 0.00936465 2.133e-06 0.008028634 0.002796742 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 8.210466 
#> 
#> solution.v:
#>  9.1861e-05 0.01307954 0.0001713726 0.9027761 0.001312503 0.0009522142 0.07941242 0.002203981 
#> 
#> solution.w:
#>  4.3323e-06 1.3696e-06 2.89316e-05 4.3487e-06 7.8733e-06 5.7483e-06 3.2804e-06 1.4722e-06 7.157e-07 1.42474e-05 4.6408e-06 8.809e-07 8.48e-08 8.1756e-06 7.8244e-06 6.9614e-06 6.3875e-06 1.085e-05 5.1346e-06 2.517e-06 3.7391e-06 4.428e-06 1.07309e-05 4.5814e-06 1.7336e-06 1.14698e-05 2.6425e-06 9.9073e-06 1.2999e-06 5.9927e-06 0.02973203 6.502e-06 5.4916e-06 0.9509682 1.35986e-05 1.13857e-05 6.9684e-05 1.51637e-05 2.7203e-06 3.6003e-06 2.61e-08 3.6045e-06 6e-10 7.672e-07 4.7743e-06 9.9518e-06 0.01895628 1.30853e-05 8.252e-07 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 985.3692 
#> 
#> solution.v:
#>  8.982e-06 0.1355871 0.0194207 0.2963359 0.1422372 0.07090635 0.06756316 0.2679406 
#> 
#> solution.w:
#>  0.0001620089 1.10462e-05 4.5235e-05 6.15519e-05 7.75425e-05 2.78855e-05 0.04963553 0.001278593 1.32328e-05 0.0001829085 0.0002913327 0.1728382 1.42917e-05 0.0001317607 0.0001996679 6.146e-07 0.176417 3.07804e-05 5.73496e-05 9.3166e-06 0.0009651535 6.20491e-05 8.65232e-05 9.1477e-06 3.95442e-05 0.0001891226 1.76892e-05 4.60384e-05 7.63302e-05 0.000236569 1.57081e-05 0.000132409 0.001284343 6.11754e-05 0.0002258311 7.54423e-05 1.69295e-05 0.000259294 3.05091e-05 0.0002400242 0.5225117 0.0001427136 0.06938602 7.06386e-05 0.002160386 1.97105e-05 4.844e-06 0.0001306266 1.77069e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 12025.25 
#> 
#> solution.v:
#>  0.08326362 0.07840209 0.03412162 0.5860794 0.03063081 0.009405399 0.1718012 0.006295867 
#> 
#> solution.w:
#>  3.6e-09 0.0151562 7e-09 3.9e-09 4.76343e-05 6.8e-09 3.1e-09 1.6e-09 0.09115595 1.20522e-05 2.7e-09 5e-10 3.9e-09 7e-08 4e-09 3e-09 2.9e-09 7.3e-09 0.04677503 3.2e-09 6.1e-09 5.8e-09 1.286e-07 4.1e-09 0 6.7e-09 4.2e-09 1.4e-09 0.7494174 1.38e-08 0.09743533 5.72e-08 2.3e-09 1.3e-09 1.45e-08 5.5e-09 9e-09 1.2e-08 3e-09 3e-10 1.2e-09 4.4e-09 1.8e-09 1e-09 4.1e-09 1.01e-08 2e-10 2.8e-09 4.8e-09 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 247.4511 
#> 
#> solution.v:
#>  0.002221942 0.0001608164 0.0003764721 0.9946159 9.79011e-05 0.001076232 0.001447484 3.2751e-06 
#> 
#> solution.w:
#>  4.0311e-06 0.0006850294 7.0221e-06 3.4186e-06 1.1043e-06 1.02361e-05 0.008450229 1.68929e-05 4.4356e-06 2.7061e-06 4.0074e-06 0.1282371 1.6e-09 4.2674e-06 8.6222e-06 5.6563e-06 1.10249e-05 3.6348e-06 3.0416e-06 1.109e-07 6.0053e-06 1.86922e-05 3.3574e-06 7.496e-06 2.9538e-06 6.6063e-06 5e-09 6.4652e-06 2.37165e-05 6.6164e-06 4.196e-07 1.8542e-06 5.0298e-06 2.2e-09 4.3318e-06 4.9596e-06 7.6094e-06 5.6688e-06 7.317e-07 4.6686e-06 9e-10 4.574e-06 6.556e-07 0.8623741 6.8548e-06 1.65137e-05 2.746e-07 1.73146e-05 1.8e-09 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 540119.4 
#> 
#> solution.v:
#>  0.001302347 0.08579296 0.0005013398 0.9021111 0.005529963 0.0009638863 0.002427578 0.001370815 
#> 
#> solution.w:
#>  0.0005642885 0.0008874737 0.0005354614 0.0003920277 2.39e-08 0.0005976311 0.5655298 0.001469271 0.05346822 0.1349316 0.001064511 0.0002040949 0.0006610178 0.001080018 0.0009519459 0.0006052778 0.0005728071 0.0004623228 0.0005368859 0.000514938 0.006722129 0.001051287 0.001681294 0.000366635 0.0004520316 0.0005586801 0.0003608619 0.0005421737 1.7984e-06 0.003578253 0.0003326537 0.2033136 0.0009433472 0.0005014233 0.001513069 0.0004685662 0.0004695308 0.001397569 0.001347824 0.0007951709 0.0003563415 0.0004558143 0.001682201 0.001002939 0.001893615 0.0006752237 0.000435832 0.001108394 0.0009621725 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 539.9456 
#> 
#> solution.v:
#>  0.0001193512 0.001225913 0.001382217 0.9892987 0.0002105559 0.003908711 0.003073648 0.0007809207 
#> 
#> solution.w:
#>  1.00635e-05 5.578e-07 1.63284e-05 2.68489e-05 1.3369e-06 5.6365e-06 4.8393e-06 7.0195e-06 0.02703473 3.2078e-06 6.0575e-06 2.7734e-06 0.1630869 4.6843e-06 1.06655e-05 5.9809e-06 7.9125e-06 1.93023e-05 7.3772e-06 2.906e-07 5.1026e-06 5.7176e-06 3.6942e-06 4.6034e-06 3.83819e-05 9.0135e-06 0.5202779 7.1081e-06 1.3014e-05 4.5e-09 5.0413e-06 2.2152e-06 6.7092e-06 7.6e-09 4.4616e-06 1.34894e-05 4.6667e-06 5.1655e-06 2.1439e-06 1.00996e-05 5.5648e-06 1.60748e-05 4.4235e-06 4.71e-08 6.0003e-06 5.1032e-06 0.2892697 1.10977e-05 9.263e-07 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#>  
#> 
#> **************** 
#> **************** 
#> **************** 
#> 
#> MSPE (LOSS V): 2432130 
#> 
#> solution.v:
#>  0.1641728 0.0005899677 0.007150614 0.3718295 0.001216574 3.99299e-05 0.3574146 0.09758602 
#> 
#> solution.w:
#>  0.0003034878 2.16863e-05 4.98511e-05 0.0001867912 0.6201794 6.0817e-05 8.60098e-05 3.04016e-05 0.06885295 0.2013282 0.005102554 0.0003553653 2.20581e-05 6.36761e-05 3.75491e-05 7.69934e-05 0.0003341125 8.22032e-05 9.60475e-05 6.2658e-05 0.002626319 5.57672e-05 3.30424e-05 0.0001196709 5.34206e-05 0.0001533768 5.04208e-05 0.0008439825 2.6744e-05 1.71449e-05 0.000100427 6.45594e-05 0.09675836 6.42268e-05 5.06578e-05 0.0001873333 4.32788e-05 7.88702e-05 3.08512e-05 7.13572e-05 0.0007555687 0.0003086921 2.622e-07 2.37086e-05 4.23535e-05 4.00974e-05 2.59649e-05 2.4955e-05 1.57231e-05 
#> 
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#> 
#> Error in svd(c): infinite or missing values in 'x'
# Breaks during the 34th interaction, which is the 37th state (NC) since some statefip numbers are skipped.

# To make sure this is not a placebo function related issue, we replaced the 48th state 
# (the original, which is Texas) with the 37th state (North Carolina) and ran the synth() function again.

#e.g.
texas$state[texas$statefip == 37]
#>  [1] "North Carolina" [...]

unique(texas$statefip)
#>  [1]  1  2  4  5  6  8  9 10 11 12 13 15 16 17 18 19 20 21 22 23 24 25 26
#> [24] 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 44 45 46 47 48 49 50
#> [47] 51 53 54 55 56



dataprep.out = dataprep(
  foo = texas,
  predictors = c("poverty", "income", "ur"),
  predictors.op = "mean",
  time.predictors.prior = 1985:1993,
  special.predictors = list(
    list("bmprison", 1988, "mean"),
    list("alcohol", 1990, "mean"),
    list("aidscapita",  1990:1991, "mean"),
    list("black", 1990:1992, "mean"),
    list("perc1519", 1990, "mean")),
  dependent = "bmprison",
  unit.variable = "statefip",
  unit.names.variable = "state",
  time.variable = "year",
  treatment.identifier = 37,
  controls.identifier = c(1,2,4:6,8:13,15:36,38:42,44:47,49:51,53:56), 
  time.optimize.ssr = 1985:1993,
  time.plot = 1985:2000
)

synth.out = synth(data.prep.obj = dataprep.out, method = "BFGS")
#> 
#> X1, X0, Z1, Z0 all come directly from dataprep object.
#> 
#> 
#> **************** 
#>  searching for synthetic control unit  
#> 
#> Error in svd(c): infinite or missing values in 'x'
##As you can see, the function breaks at the infinite or missing value issue.

#%#%#%#%#%#%#%#%#%#%#%#%#%#%#
#%#%#%#%#%#%#%#%#%#%#%#%#%#%#

#We also used the MSCMT package, with no success.
####Using MSCMT####
texas.list <- listFromLong(texas, unit.variable="statefip", 
                      time.variable="year", unit.names.variable = "state")

treatment.identifier <- "Texas"
controls.identifier  <- setdiff(colnames(texas.list[[1]]),
                                treatment.identifier)
times.dep  <- cbind("bmprison"  = c(1985,1993))

times.pred <- cbind("bmprison"  = c(1985,1993),
                    "alcohol"   = c(1990,1990),
                    "aiscapita" = c(1990,1991),
                    "income"    = c(1985,1993),
                    "ur"        = c(1985,1993),
                    "poverty"   = c(1985,1993),
                    "black"     = c(1990,1992),
                    "perc1519"  = c(1990,1990))

agg.fns <- rep("mean", ncol(times.pred)) 

synth_texas <- mscmt(texas.list, treatment.identifier, 
                     controls.identifier, times.dep, 
                     times.pred, agg.fns, seed = 1)
#> Error in 1:ncol(tmp): argument of length 0
```

<sup>Created on 2019-09-25 by the [reprex package](https://reprex.tidyverse.org) (v0.3.0)</sup>
